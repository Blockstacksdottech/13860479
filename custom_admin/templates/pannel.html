<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>morphex - Dashboard</title>
    <link rel="shortcut icon" href="/assets/img/favicon.png">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="/assets/css/mdb.min.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">
    <!-- Datatables CSS -->
    <link href="/assets/css/addons/datatables.min.css" rel="stylesheet">
</head>

<body>
	{% load tools %}
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand text-dark" href="#">
                <img src="/assets/img/logo.png" alt="Morphex" width="180" height="60">
                <span> - ADMIN</span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-4" aria-controls="navbarSupportedContent-4" aria-expanded="false" aria-label="Toggle navigation">
                 <span class="navbar-toggler-icon"></span>
             </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent-4">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link text-uppercase" href="">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase" href="/settings">Settings</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase" href="/blog/admin">Blog CMS</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link text-uppercase" href="/logout">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="header-border-img">
        <img src="/assets/img/header-border-bg.png" alt="Morphex" />
    </div>

    <section>
        <div class="container">
            <div class="row mb-3">
                <div class="col-xl-4 col-lg-4">
                    <div class="card card-inverse card-danger">
                        <div class="card-block aqua-gradient">
                            <div class="rotate">
                                <i class="fab fa-bitcoin fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase pt-4  text-white  text-center ">Total Transactions</h6>
                            <h1 class="display-1">{{t_count}}</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-4">
                    <div class="card card-inverse card-danger">
                        <div class="card-block peach-gradient">
                            <div class="rotate">
                                <i class="fab fa-bitcoin fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase pt-4  text-white  text-center ">Pending Transactions</h6>
                            <h1 class="display-1">{{p_count}}</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-4">
                    <div class="card card-inverse card-info">
                        <div class="card-block purple-gradient">
                            <div class="rotate">
                                <i class="fab fa-bitcoin fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase pt-4  text-white  text-center ">In Progress Transactions</h6>
                            <h1 class="display-1">{{e_count}}</h1>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="row mb-3">
                <div class="col-xl-6 col-lg-6">
                    <div class="card card-inverse card-info">
                        <div class="card-block deep-orange darken-2">
                            <div class="rotate">
                                <i class="fa fa-list fa-5x"></i>
                            </div>
                            <h6 class="text-uppercase pt-4  text-white  text-center ">Processed Volume</h6>
                            <h1 class="display-1">125</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-6">
                    <div class="card card-inverse blue-gradient">
                        <div class="card-block bg-warning">
                            <div class="rotate">
                                <i class="fas fa-percent fa-5x"></i>
                            </div>
                            <h6 class="text-uppercase pt-4  text-white  text-center ">Growth Percentage</h6>
                            <h1 class="display-1">36</h1>
                        </div>
                    </div>
                </div>
            </div>-->
        </div> 
    </section>

    <section class="my-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-12 mb-lg-0 mb-4">
                    <div class="card">
                        <div class="card-header white-text blue-gradient">
                            TOP EXCHANGES
                        </div>
                        <div class="card-body">
                            <table id="dtVerticalScrollExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
                                <thead class="text-center">
                                    <tr>
                                        <th class="th-sm">Transaction ID
                                        </th>
                                        <th class="th-sm">Coins Exchanged
                                        </th>
                                        <th class="th-sm">Amount Exchanged
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="text-center">
									{% for elem in top %}
                                    <tr>
											{% getindex elem 0 as ress %}
										<td>{{ress}}</td>
										{% getindex elem 1 as contain %}
										{% getindex contain 1 as cont %}
										<td>{{cont.in_currency}} <i class="fas fa-exchange-alt"></i> {{cont.out_currency}}</td>
										{% getindex contain 0 as resss %}
                                        <td><i class="fas fa-dollar-sign"></i>{{resss}}</td>
									</tr>
									{% endfor %}
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header white-text blue-gradient">
                                    Balance Reports
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3 col-3 text-left pl-4">
                                            <a class="p-2 m-2 fa-lg fb-ic">
                                                <img class="img-fluid" src="/assets/img/coins/btc.png">
                                            </a>
                                        </div>
                                        <div class="col-md-9 col-9 text-right pr-5">
                                            <p class="font-small grey-text mb-1">BTC : {%getindex BTC 0 as btc1 %}{{btc1}}/{% getindex BTC 1 as btc2 %}{{btc2}}</p>
                                            <h5 class="ml-4 mb-1 font-weight-bold">{% getindex BTC 2 as btc3 %}{{btc3}}%</h5>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-3 col-3 text-left pl-4">
                                            <a class="p-2 m-2 fa-lg fb-ic">
                                                <img class="img-fluid" src="/assets/img/coins/bch.png">
                                            </a>
                                        </div>
                                        <div class="col-md-9 col-9 text-right pr-5">
                                            <p class="font-small grey-text mb-1">BCH : {%getindex BCH 0 as bch1 %}{{bch1}}/{% getindex BCH 1 as bch2 %}{{bch2}}</p>
                                            <h5 class="ml-4 mb-1 font-weight-bold">{% getindex BCH 2 as bch3 %}{{bch3}}%</h5>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-3 col-3 text-left pl-4">
                                            <a class="p-2 m-2 fa-lg fb-ic">
                                                <img class="img-fluid" src="/assets/img/coins/eth.png">
                                            </a>
                                        </div>
                                        <div class="col-md-9 col-9 text-right pr-5">
                                            <p class="font-small grey-text mb-1">ETH : {%getindex ETH 0 as eth1 %}{{eth1}}/{% getindex ETH 1 as eth2 %}{{eth2}}</p>
                                            <h5 class="ml-4 mb-1 font-weight-bold">{% getindex ETH 2 as eth3 %}{{eth3}}%</h5>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-3 col-3 text-left pl-4">
                                            <a class="p-2 m-2 fa-lg fb-ic">
                                                <img class="img-fluid" src="/assets/img/coins/xmr.png">
                                            </a>
                                        </div>
                                        <div class="col-md-9 col-9 text-right pr-5">
                                            <p class="font-small grey-text mb-1">XMR : {%getindex XMR 0 as xmr1 %}{{xmr1}}/{% getindex XMR 1 as xmr2 %}{{xmr2}}</p>
                                            <h5 class="ml-4 mb-1 font-weight-bold">{% getindex XMR 2 as xmr3 %}{{xmr3}}%</h5>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-3 col-3 text-left pl-4">
                                            <a class="p-2 m-2 fa-lg fb-ic">
                                                <img class="img-fluid" src="/assets/img/coins/ltc.png">
                                            </a>
                                        </div>
                                        <div class="col-md-9 col-9 text-right pr-5">
                                            <p class="font-small grey-text mb-1">LTC : {%getindex LTC 0 as ltc1 %}{{btc1}}/{% getindex LTC 1 as ltc2 %}{{ltc2}}</p>
                                            <h5 class="ml-4 mb-1 font-weight-bold">{% getindex LTC 2 as ltc3 %}{{ltc3}}%</h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="my-5">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <!-- Table with panel -->
                    <div class="card card-cascade narrower">

                        <!--Card image-->
                        <div class="view view-cascade gradient-card-header blue-gradient narrower py-2 mx-4 mb-3 d-flex justify-content-between align-items-center">

                            <div>
                                <a href="" class="white-text mx-3">Last 10 Transaction</a>
                            </div>
                            <!-- <div>
                                <button type="button" class="btn btn-outline-white btn-rounded btn-sm px-2">
                                    <i class="far fa-trash-alt mt-0"></i>
                                </button>
                            </div> -->
                        </div>
                        <!--/Card image-->

                        <div class="px-4">

                            <div class="table-wrapper">

                                <div class='table-responsive'>
                                <!--Table-->
                                <table class="table table-hover mb-0">

                                    <!--Table head-->
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th class="th-lg">
                                                <a>Transaction ID</a>
                                            </th>
                                            
                                            <th class="th-lg">
                                                <a href="">Coins Exchange</a>
                                            </th>
                                            <th class="th-lg">
                                                <a href="">Status</a>
                                            </th>
                                            <th class="th-lg">
                                                <a>Receiving address</a>
                                            </th>
                                        </tr>
                                    </thead>
                                    <!--Table head-->

                                    <!--Table body-->
                                    <tbody>
										{% for l in last %}
                                        <tr>
												<th scope="row">
														<div>
										<a  href='/remove/{{l.transaction_id}}'><button type="button" class="btn btn-outline-white btn-rounded btn-sm px-2">
											<i class="far fa-trash-alt mt-0" style='color:#303f9f;'></i>
										</button></a>
									</div>
													</th>
                                            <td>{{l.transaction_id}}</td>
                                            
											<td>{{l.in_currency}} <i class="fas fa-exchange-alt"></i> {{l.out_currency}}</td>
											{% checkstatus l.transaction_id  as res %}
											{% if res == 1 %}
											<td><span class="badge badge-warning">Pending</span></td>
											{% elif res == 2 %}
											<td><span class="badge badge-danger">In Progress</span></td>
											{% else %}
											<td><span class="badge badge-success">Completed</span></td>
                                            {% endif %}
                                            <td>{{l.return_address}}</td>
										</tr>
										{% endfor %}
                                        
                                    </tbody>
                                    <!--Table body-->
                                </table>
                                </div>
                                <!--Table-->
                            </div>

                        </div>

                    </div>
                    <!-- Table with panel -->
                </div>
            </div>
        </div>

    </section>

    <!-- Footer -->
    <footer class="page-footer font-small special-color-dark">

        <!-- Copyright -->
        <div class="footer-copyright text-center py-3">
            Copyright (c) 2019 morphex - All rights reserved
        </div>
        <!-- Copyright -->

    </footer>
    <!-- Footer -->

    <!-- SCRIPTS -->
    <!-- JQuery -->
    <script type="text/javascript" src="/assets/js/jquery-3.4.1.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="/assets/js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
    <!--Datatables JavaScript -->
    <script type="text/javascript" src="/assets/js/addons/datatables.min.js"></script>

    <script>
        $(document).ready(function () {
        $('#dtVerticalScrollExample').DataTable({
        "scrollY": "200px",
        "scrollCollapse": false
        });
        $('.dataTables_length').addClass('bs-select');
        });
    </script>
    <script>
        function sortTable() {
          var table, rows, switching, i, x, y, shouldSwitch;
          table = document.getElementById("dtVerticalScrollExample");
          switching = true;
          /*Make a loop that will continue until
          no switching has been done:*/
          while (switching) {
            //start by saying: no switching is done:
            switching = false;
            rows = table.rows;
            /*Loop through all table rows (except the
            first, which contains table headers):*/
            for (i = 1; i < (rows.length - 1); i++) {
              //start by saying there should be no switching:
              shouldSwitch = false;
              /*Get the two elements you want to compare,
              one from current row and one from the next:*/
              x = rows[i].getElementsByTagName("TD")[2].innerHTML.toLocaleLowerCase().replace('<i class="fas fa-dollar-sign"></i>','');
              y = rows[i + 1].getElementsByTagName("TD")[2].innerHTML.toLocaleLowerCase().replace('<i class="fas fa-dollar-sign"></i>','');
              //check if the two rows should switch place:
              if (Number(x) < Number(y) ) {
                //if so, mark as a switch and break the loop:
                console.log('switch');
                shouldSwitch = true;
                break;
              }
            }
            if (shouldSwitch) {
              /*If a switch has been marked, make the switch
              and mark that a switch has been done:*/
              rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
              switching = true;
            }
          }
        }
        setTimeout(sortTable,1000)
        </script>

</body>

</html>